<section id="signup">
  <form method="post" action="/customer/signup" onsubmit="return validate()" class="signup-form">
    <div class="signup-form-header">
      <i class="icon-SnackVan"></i>
      <h1>Signup Form</h1>
    </div>
    <label for="givenName">Given Name</label>
    <input placeholder="given name" name='givenName' id='givenName' value="" required />
    <label for="familyName">Family Name</label>
    <input placeholder="family name" name='familyName' id='familyName' value="" required />
    <label for="emailAddress">Email Address</label>
    <input placeholder="email address" name='email' id='email' type="email" value="" required />
    <label for="password">Password</label>
    <input placeholder="***************" name='password' id='password' type="password" value="" required />
    <label for="confirmPassword">Confirm Password</label>
    <input placeholder="***************" name='confirmPassword' id='confirmPassword' type="password" value="" required />
    <div class="signup-form-submit">
      <button type="submit" class="button" id="login-button"><i class="fas fa-sign-in-alt"></i>&nbsp;SIGN UP</button>
    </div>
  </form>
</section>

<script>

  // check if the sign up meet the requirements
  function validate() {
    //Passwords MUST be hashedbefore storing them in the database.
    const givenName = document.getElementById("givenName").value;
    const familyName = document.getElementById("familyName").value;
    const email = document.getElementById("email").value;
    if (givenName === "" || familyName === "" || email === "") {
      alert("Names or email cannot be empty.");
      return false;
    }
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirmPassword").value;
    if (confirmPassword !== password) {
      alert("Passwords do not match.");
      return false;
    }
    if (!passwordPolicy(password)) {
      alert("Invalid password\n\n" +
            "1. At least one alphabet character (upper or lower caseA-Z)\n" +
            "2. At least one numerical digit (0-9)\n" +
            "3. A length of at least 8 characters");
      return false;
    }
  }

  // checks the following:
  // 1. At least one alphabet character (upper or lower case A-Z)
  // 2. At least one numerical digit (0-9)
  // 3. A length of at least 8 characters
  function passwordPolicy(password) {
    const regexNum = /\d/;
    const regexChar = /[a-zA-Z]/;
    
    const hasAlphabet = regexChar.test(password);
    const hasNum = regexNum.test(password);
    const length = password.length;
    let validLen;
    if(length >= 8 ){
      validLen = 1;
    }
    else{
      validLen = 0;
    }

    if((hasAlphabet == 1) && (hasNum == 1) && (validLen == 1)){
      return true;
    }
    else{
      return false;
    }
  }
</script>
